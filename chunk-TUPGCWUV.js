import{a as ee,b as te,c as v,d as ie,e as oe,f as ne,g as M,h as re,i as se,j as ae,k as le,l as ce}from"./chunk-ZP6RCNHC.js";import{$ as h,A,Aa as J,Ca as Y,K as F,L as R,M as r,P,R as U,S as f,U as l,V as m,W as b,X as S,Z as K,_ as V,aa as W,da as G,e as T,ea as z,f as _,g as C,j as y,ja as Q,k,l as B,la as q,n as D,o as L,oa as $,p as N,pa as H,q as j,r as O,u as p,va as X,x as a,y as g,za as Z}from"./chunk-H52FMC3H.js";function x(e){return Array.isArray(e)?e:[e]}var E;try{E=typeof Intl<"u"&&Intl.v8BreakIterator}catch{E=!1}var de=(()=>{class e{constructor(t){this._platformId=t,this.isBrowser=this._platformId?H(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||E)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||e)(a(F))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var pe=new Set,u,ve=(()=>{class e{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Se}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&ye(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||e)(a(de),a(R,8))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ye(e,s){if(!pe.has(e))try{u||(u=document.createElement("style"),s&&(u.nonce=s),u.setAttribute("type","text/css"),document.head.appendChild(u)),u.sheet&&(u.sheet.insertRule(`@media ${e} {body{ }}`,0),pe.add(e))}catch(t){console.error(t)}}function Se(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var me=(()=>{class e{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new C}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return ue(x(t)).some(o=>this._registerQuery(o).mql.matches)}observe(t){let o=ue(x(t)).map(c=>this._registerQuery(c).observable),n=k(o);return n=B(n.pipe(L(1)),n.pipe(N(1),D(0))),n.pipe(y(c=>{let d={matches:!1,breakpoints:{}};return c.forEach(({matches:w,query:fe})=>{d.matches=d.matches||w,d.breakpoints[fe]=w}),d}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),n={observable:new _(c=>{let d=w=>this._zone.run(()=>c.next(w));return i.addListener(d),()=>{i.removeListener(d)}}).pipe(j(i),y(({matches:c})=>({query:t,matches:c})),O(this._destroySubject)),mql:i};return this._queries.set(t,n),n}static{this.\u0275fac=function(i){return new(i||e)(a(ve),a(P))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ue(e){return e.map(s=>s.split(",")).reduce((s,t)=>s.concat(t)).map(s=>s.trim())}var he=(()=>{class e{constructor(t){this.breakpointObserver=t,this.isMobile=!1,this.isTablet=!1,this.isDesktop=!1,this.CUSTOM_MOBILE="(max-width: 599.98px) and (orientation: portrait)",this.CUSTOM_TABLET="(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",this.CUSTOM_DESKTOP="(min-width: 1280px) and (orientation: landscape)",this.breakpointObserver.observe([this.CUSTOM_MOBILE,this.CUSTOM_TABLET,this.CUSTOM_DESKTOP]).subscribe(i=>{this.isMobile=i.breakpoints[this.CUSTOM_MOBILE],this.isTablet=i.breakpoints[this.CUSTOM_TABLET],this.isDesktop=i.breakpoints[this.CUSTOM_DESKTOP],console.log("Breakpoints:",i.breakpoints),console.log("Is Mobile:",this.isMobile),console.log("Is Tablet:",this.isTablet),console.log("Is Desktop:",this.isDesktop)})}static{this.\u0275fac=function(i){return new(i||e)(a(me))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var xe=e=>({"active-btn":e});function Ee(e,s){if(e&1&&(m(0,"p"),h(1),b()),e&2){let t=V();l(t.layoutClass),r(),W(t.errorMsg)}}var Je=(()=>{class e{constructor(){this.showError=!1,this.errorMsg="Email ou mot de passe incorrect, veuillez vous inscrire",this.ts=g(ce),this.router=g(Z),this.responsiveService=g(he),this.loginForm=new ne({email:new M("",[v.required,v.email]),password:new M("",[v.required])})}get layoutClass(){return this.responsiveService.isMobile?(console.log("Is Mobile: ",this.responsiveService.isMobile),"mobile-layout"):this.responsiveService.isTablet?(console.log("Is Tablet: ",this.responsiveService.isTablet),"tablet-layout"):(console.log("Is Desktop: ",this.responsiveService.isDesktop),"desktop-layout")}onSubmit(){return T(this,null,function*(){let t=this.loginForm.value.email,i=this.loginForm.value.password;this.ts.loggIn(t,i).subscribe({next:o=>{let n=o.token;n?(localStorage.setItem("token",n),localStorage.setItem("email",t),this.router.navigateByUrl("/todos")):this.showError=!0},error:()=>{this.showError=!0}})})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=A({type:e,selectors:[["app-login"]],standalone:!0,features:[G],decls:14,vars:23,consts:[[3,"isRegisterBtnShown","isLoginBtnShown","isLogoutBtnShown"],[1,"form-container",3,"formGroup"],[1,"title"],[1,"sub-title"],["routerLink","/register"],["type","email","placeholder","Email","formControlName","email"],["type","password","placeholder","Mot de passe","formControlName","password"],[3,"class",4,"ngIf"],[1,"auth-btn",3,"click","ngClass","disabled"]],template:function(i,o){i&1&&(S(0,"app-toolbar",0),m(1,"form",1)(2,"h2",2),h(3,"Connectez-vous \xE0 Rikudo"),b(),m(4,"h3",3),h(5," Veuillez entrer votre email "),m(6,"a",4),h(7,"S'inscrire"),b()(),S(8,"br")(9,"input",5)(10,"input",6),U(11,Ee,2,3,"p",7),m(12,"button",8),K("click",function(){return o.onSubmit()}),h(13," Connexion "),b()()),i&2&&(f("isRegisterBtnShown",!0)("isLoginBtnShown",!1)("isLogoutBtnShown",!1),r(),l(o.layoutClass),f("formGroup",o.loginForm),r(),l(o.layoutClass),r(2),l(o.layoutClass),r(2),l(o.layoutClass),r(3),l(o.layoutClass),r(),l(o.layoutClass),r(),f("ngIf",o.showError),r(),l(o.layoutClass),f("ngClass",z(21,xe,!o.loginForm.invalid))("disabled",o.loginForm.invalid))},dependencies:[$,Q,q,ee,le,re,te,ie,oe,se,ae,Y,J,X]})}}return e})();export{Je as default};
