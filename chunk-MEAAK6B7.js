import{a as B,b as A,c as G,d as U,e as H,f as Y,g as w,h as q,i as z,j as R,k as J}from"./chunk-HG6SUHD3.js";import{$ as b,C as L,D as d,F as r,G as c,H as C,I as $,J as l,K as S,L as a,N as O,P as g,Q as T,R as D,S as N,V as x,W as V,Y as I,_ as h,a as P,b as F,d as M,f as E,g as j,ha as v,m as _,o as f,t as k,u as y,y as m}from"./chunk-O5DS7QM3.js";var tt=i=>({"active-btn":i}),Q=(()=>{let o=class o{constructor(){this.ts=_(v),this.addTodoForm=new Y({title:new w("",G.required),description:new w("")})}onSubmit(){let t={title:this.addTodoForm.value.title,description:this.addTodoForm.value.description,done:!1,userEmail:localStorage.getItem("email")};this.ts.newTodo(t).subscribe({next:e=>{console.log("Todo ajout\xE9 avec succ\xE8s:",t);let n=F(P({},t),{id:e.todoId});console.log("Id newtodo : ",n.id),this.ts.addLocal(n),this.ts.todos$.subscribe({next:s=>console.log("addlocal : ",n)}),this.addTodoForm.reset()},error:e=>console.error("Erreur lors de l'ajout du todo:",e)})}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=f({type:o,selectors:[["app-add-todo"]],standalone:!0,features:[g],decls:5,vars:5,consts:[[1,"form-container",3,"formGroup"],["type","text","placeholder","Titre","formControlName","title"],["type","text","placeholder","Description","formControlName","description"],[1,"auth-btn",3,"click","ngClass","disabled"]],template:function(e,n){e&1&&(r(0,"form",0),C(1,"input",1)(2,"input",2),r(3,"button",3),l("click",function(){return n.onSubmit()}),a(4," Ajouter "),c()()),e&2&&(d("formGroup",n.addTodoForm),m(3),d("ngClass",T(3,tt,!n.addTodoForm.invalid))("disabled",n.addTodoForm.invalid))},dependencies:[h,x,J,q,A,U,H,z,R,b],styles:[".form-container[_ngcontent-%COMP%]{width:max-content;border-radius:8px;margin:2rem auto;display:flex;padding:0;border:none;box-shadow:0 0 #0000001a}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 .5rem}input[type=text][_ngcontent-%COMP%]{width:auto}.auth-btn[_ngcontent-%COMP%]{width:100%;padding:14px 20px;border-radius:8px}"]});let i=o;return i})();var et=i=>({done:i});function ot(i,o){if(i&1){let p=$();r(0,"div",3)(1,"div",4)(2,"input",5),l("click",function(){let e=k(p).$implicit,n=S();return y(n.updateTodo(e))}),c(),r(3,"div",6)(4,"h4",7),a(5),c(),r(6,"h5",8),a(7),c()()(),r(8,"button",9),l("click",function(){let e=k(p).$implicit,n=S();return y(n.deleteTodo(e))}),a(9," Supprimer "),c()()}if(i&2){let p=o.$implicit;m(2),d("checked",p.done),m(),d("ngClass",T(4,et,p.done)),m(2),O(" ",p.title," "),m(2),O(" ",p.description," ")}}var W=(()=>{let o=class o{constructor(){this.ts=_(v),this.users$=this.ts.getUsers(),this.email=null,this.todos$=this.ts.todos$,this.filterSubject=new M("all"),this.sortSubject=new M(!1),this.filteredTodos$=j([this.todos$,this.filterSubject,this.sortSubject]).pipe(E(([t,e,n])=>{let s=t;return e==="done"?s=t.filter(u=>u.done):e==="notDone"&&(s=t.filter(u=>!u.done)),n&&(s=[...s].sort((u,X)=>u.done===X.done?0:u.done?1:-1)),s})),this.deleteTodo=t=>this.ts.deleteTodo(t).subscribe({next:()=>{console.log("Todo deleted successfully:",t),this.ts.removeLocal(t)},error:e=>console.error("Error delete todo:",e)}),this.getTodosByUser=t=>this.ts.getTodosByUser(t)}ngOnInit(){typeof localStorage<"u"?(this.email=localStorage.getItem("email"),console.log("test email : ",this.email)):console.log("localStorage n'est pas disponible"),this.email&&(console.log("test email2 : ",this.email),this.ts.loadTodos(this.email),this.todos$=this.ts.todos$,this.todos$.subscribe({next:t=>console.log("test todos : ",t),error:t=>console.error("Erreur lors de la r\xE9cup\xE9ration des todos :",t)}))}updateTodo(t){t.done=!t.done,this.ts.updateTodo(t).subscribe({next:()=>console.log("Todo updated successfully:",t),error:e=>console.error("Error updating todo:",e)})}sortTasks(){this.sortSubject.next(!this.sortSubject.value)}filterTasks(t){this.filterSubject.next(t)}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=f({type:o,selectors:[["app-todo-list"]],standalone:!0,features:[g],decls:11,vars:3,consts:[[1,"actions-container"],[3,"click"],["class","todo-card-container",4,"ngFor","ngForOf"],[1,"todo-card-container"],[1,"todo-content"],["type","checkbox","name","done",3,"click","checked"],[1,"title-desc",3,"ngClass"],[1,"title"],[1,"description"],[1,"delete-btn",3,"click"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"button",1),l("click",function(){return n.filterTasks("all")}),a(2,"Toutes les t\xE2ches"),c(),r(3,"button",1),l("click",function(){return n.filterTasks("done")}),a(4,"T\xE2ches faites"),c(),r(5,"button",1),l("click",function(){return n.filterTasks("notDone")}),a(6,"T\xE2ches non faites"),c(),r(7,"button",1),l("click",function(){return n.sortTasks()}),a(8,"Trier par ordre croissant (non faites -> faites)"),c()(),L(9,ot,10,6,"div",2),D(10,"async")),e&2&&(m(9),d("ngForOf",N(10,1,n.filteredTodos$)))},dependencies:[h,x,V,I,b],styles:['@charset "UTF-8";.todo-card-container[_ngcontent-%COMP%]{width:clamp(80%,5vw,90%);max-width:1200px;margin:1rem auto;display:flex;justify-content:space-between;align-items:center;border-radius:8px;border:1px rgba(40,40,40,.1019607843) solid;padding:1rem}.todo-content[_ngcontent-%COMP%]{display:flex}.title-desc[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:.2rem;font-weight:400}.done[_ngcontent-%COMP%]{text-decoration:line-through}input[_ngcontent-%COMP%]{width:20px;margin-right:1rem}.delete-btn[_ngcontent-%COMP%]{padding:.5rem;border-radius:8px;color:#fff;background:red;border:none}.delete-btn[_ngcontent-%COMP%]:hover{cursor:pointer}.actions-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin:1.5rem 0}.actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .2s ease;box-shadow:0 4px 6px #0000001a}.actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff;transform:translateY(-3px)}.actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px);box-shadow:0 2px 4px #0003}.actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(1){background-color:#f8f9fa;color:#212529}.actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2){background-color:#28a745;color:#fff}.actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(3){background-color:#dc3545;color:#fff}.actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(4){background-color:#ffc107;color:#212529}']});let i=o;return i})();var yt=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=f({type:o,selectors:[["app-todo"]],standalone:!0,features:[g],decls:3,vars:1,consts:[[3,"isLogoutBtnShown"]],template:function(e,n){e&1&&C(0,"app-toolbar",0)(1,"app-add-todo")(2,"app-todo-list"),e&2&&d("isLogoutBtnShown",!0)},dependencies:[h,B,Q,W,b]});let i=o;return i})();export{yt as default};
