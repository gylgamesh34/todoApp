import{a as M,b as N,c as m,d as B,e as I,f as R,g as d,h as G,i as T,j as D,k as V,l as z}from"./chunk-WHJJZOTX.js";import{B as s,F as h,G as a,I as r,J as l,K as c,M as v,N as C,O as n,P as S,S as w,T as b,Y as F,_ as y,ba as E,e as f,ha as L,la as _,ma as k,oa as x,p as u,r as g}from"./chunk-ZVKKEQ3A.js";var q=e=>({"active-btn":e});function j(e,A){if(e&1&&(r(0,"p"),n(1),l()),e&2){let o=C();s(),S(o.errorMsg)}}var ee=(()=>{class e{constructor(){this.showError=!1,this.errorMsg="Email ou mot de passe incorrect, veuillez vous inscrire",this.ts=u(z),this.router=u(_),this.loginForm=new R({email:new d("",[m.required,m.email]),password:new d("",[m.required])})}onSubmit(){return f(this,null,function*(){let o=this.loginForm.value.email,i=this.loginForm.value.password;this.ts.loggIn(o,i).subscribe({next:t=>{let p=t.token;p?(localStorage.setItem("token",p),localStorage.setItem("email",o),this.router.navigateByUrl("/todos")):this.showError=!0},error:()=>{this.showError=!0}})})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=g({type:e,selectors:[["app-login"]],standalone:!0,features:[w],decls:14,vars:9,consts:[[3,"isRegisterBtnShown","isLoginBtnShown","isLogoutBtnShown"],[1,"form-container",3,"formGroup"],[1,"title"],[1,"sub-title"],["routerLink","/register"],["type","email","placeholder","Email","formControlName","email"],["type","password","placeholder","Mot de passe","formControlName","password"],[4,"ngIf"],[1,"auth-btn",3,"click","ngClass","disabled"]],template:function(i,t){i&1&&(c(0,"app-toolbar",0),r(1,"form",1)(2,"h2",2),n(3,"Connectez-vous \xE0 Rikudo"),l(),r(4,"h3",3),n(5," Veuillez entrer votre email "),r(6,"a",4),n(7,"S'inscrire"),l()(),c(8,"br")(9,"input",5)(10,"input",6),h(11,j,2,1,"p",7),r(12,"button",8),v("click",function(){return t.onSubmit()}),n(13," Connexion "),l()()),i&2&&(a("isRegisterBtnShown",!0)("isLoginBtnShown",!1)("isLogoutBtnShown",!1),s(),a("formGroup",t.loginForm),s(10),a("ngIf",t.showError),s(),a("ngClass",b(7,q,!t.loginForm.invalid))("disabled",t.loginForm.invalid))},dependencies:[E,F,y,M,V,G,N,B,I,T,D,x,k,L]})}}return e})();export{ee as default};
