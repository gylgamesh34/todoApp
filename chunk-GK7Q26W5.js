import{a as j}from"./chunk-KKSOBHSF.js";import{a as N,b as R,c as u,d as T,e as B,f as D,g as f,h as G,i as V,j as z,k as q,l as x}from"./chunk-ZP6RCNHC.js";import{$ as a,A as v,Aa as L,Ca as _,M as o,R as h,S as l,U as i,V as n,W as m,X as d,Z as C,_ as S,aa as y,da as b,e as g,ea as M,ja as w,la as F,oa as k,va as E,y as p,za as I}from"./chunk-H52FMC3H.js";var A=t=>({"active-btn":t});function H(t,U){if(t&1&&(n(0,"p"),a(1),m()),t&2){let r=S();i(r.layoutClass),o(),y(r.errorMsg)}}var ie=(()=>{class t{constructor(){this.showError=!1,this.errorMsg="Email ou mot de passe incorrect, veuillez vous inscrire",this.ts=p(x),this.router=p(I),this.responsiveService=p(j),this.loginForm=new D({email:new f("",[u.required,u.email]),password:new f("",[u.required])})}get layoutClass(){return this.responsiveService.isMobile?(console.log("Is Mobile: ",this.responsiveService.isMobile),"mobile-layout"):this.responsiveService.isTablet?(console.log("Is Tablet: ",this.responsiveService.isTablet),"tablet-layout"):(console.log("Is Desktop: ",this.responsiveService.isDesktop),"desktop-layout")}onSubmit(){return g(this,null,function*(){let r=this.loginForm.value.email,s=this.loginForm.value.password;this.ts.loggIn(r,s).subscribe({next:e=>{let c=e.token;c?(localStorage.setItem("token",c),localStorage.setItem("email",r),this.router.navigateByUrl("/todos")):this.showError=!0},error:()=>{this.showError=!0}})})}static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275cmp=v({type:t,selectors:[["app-login"]],standalone:!0,features:[b],decls:14,vars:23,consts:[[3,"isRegisterBtnShown","isLoginBtnShown","isLogoutBtnShown"],[1,"form-container",3,"formGroup"],[1,"title"],[1,"sub-title"],["routerLink","/register"],["type","email","placeholder","Email","formControlName","email"],["type","password","placeholder","Mot de passe","formControlName","password"],[3,"class",4,"ngIf"],[1,"auth-btn",3,"click","ngClass","disabled"]],template:function(s,e){s&1&&(d(0,"app-toolbar",0),n(1,"form",1)(2,"h2",2),a(3,"Connectez-vous \xE0 Rikudo"),m(),n(4,"h3",3),a(5," Veuillez entrer votre email "),n(6,"a",4),a(7,"S'inscrire"),m()(),d(8,"br")(9,"input",5)(10,"input",6),h(11,H,2,3,"p",7),n(12,"button",8),C("click",function(){return e.onSubmit()}),a(13," Connexion "),m()()),s&2&&(l("isRegisterBtnShown",!0)("isLoginBtnShown",!1)("isLogoutBtnShown",!1),o(),i(e.layoutClass),l("formGroup",e.loginForm),o(),i(e.layoutClass),o(2),i(e.layoutClass),o(2),i(e.layoutClass),o(3),i(e.layoutClass),o(),i(e.layoutClass),o(),l("ngIf",e.showError),o(),i(e.layoutClass),l("ngClass",M(21,A,!e.loginForm.invalid))("disabled",e.loginForm.invalid))},dependencies:[k,w,F,N,q,G,R,T,B,V,z,_,L,E]})}}return t})();export{ie as default};
